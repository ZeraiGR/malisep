"use strict";

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

document.addEventListener("DOMContentLoaded", function () {
  var e = function e(_e, t) {
    var n = document.querySelector(t),
        i = document.querySelector(_e);
    n && i && i.addEventListener("click", function () {
      n.classList.toggle("active"), this.classList.toggle("active");
    });
  },
      t = function t(e) {
    document.querySelector(".header__burger");
    var t = document.querySelector(".header__mobile"),
        n = e.target,
        i = document.body;
    null != n.closest(".header__mobile") || n.classList.contains("header__burger") || (t.classList.remove("active"), i.classList.remove("lock"));
  };

  (function () {
    var t = function t(e) {
      var t = document.querySelector("" + e),
          n = t.querySelectorAll(".tabs__btn"),
          i = t.querySelectorAll(".tabs__content");
      t && t.addEventListener("click", function (e) {
        if (e.target.classList.contains("tabs__btn")) {
          var _t = e.target.dataset.tabsPath;
          n.forEach(function (e) {
            e.classList.remove("tabs__btn--active");
          }), document.querySelector("[data-tabs-path=\"".concat(_t, "\"]")).classList.add("tabs__btn--active"), s(_t);
        }
      });

      var s = function s(e) {
        i.forEach(function (e) {
          e.classList.remove("tabs__content--active");
        }), document.querySelector("[data-tabs-target=\"".concat(e, "\"]")).classList.add("tabs__content--active");
      };
    };

    if (document.querySelector(".partners__tabs") && t(".partners__tabs"), document.querySelector(".events-main__content") && t(".events-main__content"), document.querySelector(".program")) {
      var _n = document.querySelectorAll(".program").length;

      for (var _i = 0; _i < _n; _i++) {
        t("#program-".concat(_i + 1, " .program__tabs")), e("#program-".concat(_i + 1, " .program__close"), "#program-".concat(_i + 1, " .program__steps"));
      }
    }
  })(), function () {
    var e = document.querySelector(".success-history"),
        t = document.querySelector(".teachers-main"),
        n = document.querySelector(".blog-main__content"),
        i = document.querySelector(".events-main__content"),
        s = function s(e) {
      if (e) {
        var _t2 = (window.innerWidth - 1170 - function () {
          var e = document.createElement("div");
          e.style.overflowY = "scroll", e.style.width = "50px", e.style.height = "50px", document.body.append(e);
          var t = e.offsetWidth - e.clientWidth;
          return e.remove(), t;
        }()) / 2;

        e.style["padding-left"] = _t2 + "px";
      }
    };

    s(e), s(t), s(n), s(i);
  }(), function () {
    var e = document.querySelectorAll(".program"),
        t = function t(e, _t3) {
      document.querySelector(e).addEventListener("change", function () {
        var _this = this;

        document.querySelectorAll(_t3).forEach(function (e, t) {
          e.classList.toggle("hide", t !== _this.selectedIndex);
        });
      });
    };

    e.forEach(function (e) {
      var t;
      t = "." + e.children[0].className.replace("program__runline", "").replace("runline", "").trim(), $(t).marquee({
        duration: 1e4,
        startVisible: !0,
        duplicated: !0
      });
    }), setTimeout(function () {
      (function (e) {
        e.forEach(function (e) {
          e.classList.contains("active") || e.classList.add("hide");
        });
      })(e);
    }, 2e3), document.querySelector(".programs__choose") && document.querySelector(".program") && t(".programs__choose", ".program");
  }(), e(), function () {
    function e(e) {
      e.height = e.target.firstElementChild.clientHeight;
    }

    _toConsumableArray(document.querySelectorAll(".js-accordion")).forEach(function (t) {
      var n = {};
      !function (e, t) {
        var n = e;
        n.element = t, n.target = t.nextElementSibling || t.previousElementSibling;
      }(n, t), e(n), function (t) {
        t.element.addEventListener("click", function (e) {
          if (e.preventDefault(), function (e) {
            e.isActive ? function (e) {
              var t = e,
                  n = t.target;
              n.style.height = null, t.isActive = !1;
            }(e) : function (e) {
              var t = e,
                  n = t.target,
                  i = t.height;
              n.style.height = i + "px", t.isActive = !0;
            }(e);
          }(t), t.element.classList.toggle("active"), t.element.classList.contains("success__question")) {
            var _e2 = t.element.querySelector(".success__trigger");

            t.element.classList.contains("active") ? _e2.textContent = "Скрыть" : _e2.textContent = "Смотреть полностью";
          }
        }), window.addEventListener("resize", function () {
          return e(t);
        });
      }(n);
    });
  }(), function () {
    var e = document.querySelector(".header__burger"),
        n = document.querySelector(".header__mobile"),
        i = document.querySelector(".header__close"),
        s = document.body;
    e.addEventListener("click", function () {
      n.classList.toggle("active"), s.classList.toggle("lock"), n.classList.contains("active") ? window.addEventListener("click", t) : window.removeEventListener("click", t);
    }), i.addEventListener("click", function () {
      n.classList.remove("active"), s.classList.remove("lock");
    });
  }(), function () {
    var e = {
      Android: function Android() {
        return navigator.userAgent.match(/Android/i);
      },
      BlackBerry: function BlackBerry() {
        return navigator.userAgent.match(/BlackBerry/i);
      },
      iOS: function iOS() {
        return navigator.userAgent.match(/iPhone|iPad|iPod/i);
      },
      Opera: function Opera() {
        return navigator.userAgent.match(/Opera Mini/i);
      },
      Windows: function Windows() {
        return navigator.userAgent.match(/IEMobile/i);
      },
      any: function any() {
        return e.Android() || e.BlackBerry() || e.iOS() || e.Opera() || e.Windows();
      }
    };
    e.any() ? document.body.classList.add("touch") : document.body.classList.add("pc");
  }(), function () {
    "use strict";

    var e = document.querySelectorAll(".popup-link"),
        t = document.querySelector("body"),
        n = document.querySelectorAll(".lock-padding");
    var i = !0;

    if (e.length > 0) {
      var _loop = function _loop(_t4) {
        var n = e[_t4];
        n.addEventListener("click", function (e) {
          var t = n.getAttribute("href").replace("#", "");
          r(document.getElementById(t)), e.preventDefault();
        });
      };

      for (var _t4 = 0; _t4 < e.length; _t4++) {
        _loop(_t4);
      }
    }

    var s = document.querySelectorAll(".close-popup");

    if (s.length > 0) {
      var _loop2 = function _loop2(_e3) {
        var t = s[_e3];
        t.addEventListener("click", function (e) {
          o(t.closest(".popup")), e.preventDefault();
        });
      };

      for (var _e3 = 0; _e3 < s.length; _e3++) {
        _loop2(_e3);
      }
    }

    function r(e) {
      if (e && i) {
        var _s = document.querySelector(".popup.open");

        _s ? o(_s, !1) : function () {
          var e = window.innerWidth - t.offsetWidth + "px";
          if (n.length > 0) for (var _t5 = 0; _t5 < n.length; _t5++) {
            n[_t5].style.paddingRight = e;
          }
          t.style.paddingRight = e, t.classList.add("lock"), i = !1, setTimeout(function () {
            i = !0;
          }, 800);
        }(), e.classList.add("open"), e.addEventListener("click", function (e) {
          e.target.closest(".popup__content") || o(e.target.closest(".popup"));
        });
      }
    }

    function o(e) {
      var s = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !0;
      i && (e.classList.remove("open"), s && (setTimeout(function () {
        if (n.length > 0) for (var _e4 = 0; _e4 < n.length; _e4++) {
          n[_e4].style.paddingRight = "0px";
        }
        t.style.paddingRight = "0px", t.classList.remove("lock");
      }, 800), i = !1, setTimeout(function () {
        i = !0;
      }, 800)));
    }

    document.addEventListener("keydown", function (e) {
      if ("Escape" === e.key) {
        o(document.querySelector(".popup.open"));
      }
    }), Element.prototype.closest || (Element.prototype.closest = function (e) {
      for (var t = this; t;) {
        if (t.matches(e)) return t;
        t = t.parentElement;
      }

      return null;
    }), Element.prototype.matches || (Element.prototype.matches = Element.prototype.matchesSelector || Element.prototype.webkitMatchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector);
  }();
  new Swiper(".success-slider", {
    slidesPerView: 4,
    spaceBetween: 20,
    navigation: {
      nextEl: ".success-slide__next",
      prevEl: ".success-slide__prev"
    },
    pagination: {
      el: ".success-slide__counter",
      type: "fraction"
    },
    breakpoints: {
      320: {
        slidesPerView: 1.3
      },
      525: {
        slidesPerView: 2
      },
      768: {
        slidesPerView: 3
      },
      979: {
        slidesPerView: 2
      },
      1024: {
        slidesPerView: 3
      },
      1366: {
        slidesPerView: 4
      }
    }
  }), new Swiper(".slider-events", {
    slidesPerView: 3,
    spaceBetween: 20,
    navigation: {
      nextEl: ".slider-events__next",
      prevEl: ".slider-events__prev"
    },
    pagination: {
      el: ".slider-events__counter",
      type: "fraction"
    },
    breakpoints: {
      320: {
        slidesPerView: 1.3
      },
      630: {
        slidesPerView: 2
      },
      979: {
        slidesPerView: 3
      }
    }
  });
  var n = new Swiper(".blog-main__slider", {
    slidesPerView: 4,
    grid: {
      rows: 2
    },
    spaceBetween: 20,
    pagination: {
      el: ".blog-main__slider-counter",
      type: "fraction"
    },
    breakpoints: {
      320: {
        slidesPerView: 1,
        rows: 3
      },
      414: {
        slidesPerView: 2,
        rows: 2
      },
      768: {
        slidesPerView: 3
      },
      1024: {
        slidesPerView: 4
      }
    }
  });

  (function () {
    if (document.querySelector(".blog-main__slider") && document.documentElement.clientWidth < 1024) {
      var _e5 = document.querySelectorAll(".publication ");

      _e5[0].remove(), _e5[1].remove(), n.update(), document.documentElement.clientWidth < 768 && (_e5[2].remove(), _e5[3].remove(), n.update(), document.documentElement.clientWidth < 414 && (_e5[4].remove(), _e5[5].remove(), n.update()));
    }
  })();

  new Swiper(".teachers-slider", {
    slidesPerView: 4,
    spaceBetween: 20,
    navigation: {
      nextEl: ".teachers-main__slider-next",
      prevEl: ".teachers-main__slider-prev"
    },
    pagination: {
      el: ".teachers-main__slider-counter",
      type: "fraction"
    },
    breakpoints: {
      320: {
        slidesPerView: 1.3
      },
      530: {
        slidesPerView: 2
      },
      1024: {
        slidesPerView: 3
      },
      1440: {
        slidesPerView: 4
      }
    }
  });
  var i = new Swiper(".works-slider", {
    slidesPerView: 3,
    spaceBetween: 20,
    navigation: {
      nextEl: ".works-slide__next",
      prevEl: ".works-slide__prev"
    },
    pagination: {
      el: ".works-slide__counter",
      type: "fraction"
    },
    keyboard: {
      enabled: !0,
      onlyInViewport: !1
    },
    breakpoints: {
      320: {
        slidesPerView: 1.3
      },
      525: {
        slidesPerView: 2
      },
      768: {
        slidesPerView: 3
      },
      1366: {
        slidesPerView: 2
      },
      1800: {
        slidesPerView: 3
      }
    }
  });
  new Swiper("#exhibition", {
    slidesPerView: 3,
    spaceBetween: 20,
    observer: !0,
    observerParents: !0,
    observerChildren: !0,
    navigation: {
      nextEl: ".events-main__next",
      prevEl: ".events-main__prev"
    },
    pagination: {
      el: ".events-main__counter",
      type: "fraction"
    },
    breakpoints: {
      320: {
        slidesPerView: 1
      },
      630: {
        slidesPerView: 2
      },
      979: {
        slidesPerView: 2
      },
      1524: {
        slidesPerView: 3
      }
    }
  }), new Swiper("#lectures", {
    slidesPerView: 3,
    spaceBetween: 20,
    observer: !0,
    observerParents: !0,
    observerChildren: !0,
    navigation: {
      nextEl: ".events-main__next",
      prevEl: ".events-main__prev"
    },
    pagination: {
      el: ".events-main__counter",
      type: "fraction"
    },
    breakpoints: {
      320: {
        slidesPerView: 1
      },
      630: {
        slidesPerView: 2
      },
      979: {
        slidesPerView: 2
      },
      1524: {
        slidesPerView: 3
      }
    }
  }), new Swiper("#announcement", {
    slidesPerView: 3,
    spaceBetween: 20,
    observer: !0,
    observerParents: !0,
    observerChildren: !0,
    navigation: {
      nextEl: ".events-main__next",
      prevEl: ".events-main__prev"
    },
    pagination: {
      el: ".events-main__counter",
      type: "fraction"
    },
    breakpoints: {
      320: {
        slidesPerView: 1
      },
      630: {
        slidesPerView: 2
      },
      979: {
        slidesPerView: 2
      },
      1524: {
        slidesPerView: 3
      }
    }
  }), new Swiper("#achieve-teachers", {
    slidesPerView: 3,
    spaceBetween: 20,
    observer: !0,
    observerParents: !0,
    observerChildren: !0,
    navigation: {
      nextEl: ".events-main__next",
      prevEl: ".events-main__prev"
    },
    pagination: {
      el: ".events-main__counter",
      type: "fraction"
    },
    breakpoints: {
      320: {
        slidesPerView: 1
      },
      630: {
        slidesPerView: 2
      },
      979: {
        slidesPerView: 2
      },
      1524: {
        slidesPerView: 3
      }
    }
  }), new Swiper("#achieve-students", {
    slidesPerView: 3,
    spaceBetween: 20,
    observer: !0,
    observerParents: !0,
    observerChildren: !0,
    navigation: {
      nextEl: ".events-main__next",
      prevEl: ".events-main__prev"
    },
    pagination: {
      el: ".events-main__counter",
      type: "fraction"
    },
    breakpoints: {
      320: {
        slidesPerView: 1
      },
      630: {
        slidesPerView: 2
      },
      979: {
        slidesPerView: 2
      },
      1524: {
        slidesPerView: 3
      }
    }
  });

  (function () {
    if (document.querySelector(".success__list")) {
      var _e6 = document.querySelector(".success__list").children.length;

      for (var _t6 = 0; _t6 < _e6; _t6++) {
        new Swiper("#success-".concat(_t6 + 1, " .portfolio__slider"), {
          slidesPerView: "auto",
          spaceBetween: 20,
          navigation: {
            nextEl: "#success-".concat(_t6 + 1, " .portfolio__slider-next"),
            prevEl: "#success-".concat(_t6 + 1, " .portfolio__slider-prev")
          }
        });
        Fancybox.bind("#success-".concat(_t6 + 1, " .portfolio__slider-img"), {});
      }
    }
  })();

  (function () {
    var e = document.querySelector(".works-slide__bullets"),
        t = document.querySelector(".blog-main__bullets");

    if (document.querySelectorAll(".slider-bullet")) {
      var s = function s(e, t, n) {
        if (t = Array.from(t.children), n) {
          var _i2 = n.target,
              _s2 = _i2.getAttribute("data-index");

          console.log(), _i2.matches("." + t[0].className.replace("slider-bullet", "").replace("active", "").trim()) && (t.forEach(function (e) {
            e.classList.remove("active");
          }), _i2.classList.add("active"), e.slideTo(_s2));
        }

        t.forEach(function (e) {
          e.classList.remove("active");
        });
        t[e.realIndex].classList.add("active");
      };

      e && e.addEventListener("click", function (t) {
        s(i, e, t);
      }), t && t.addEventListener("click", function (e) {
        s(n, t, e);
      }), i.on("slideChange", function () {
        s(i, e);
      }), n.on("slideChange", function () {
        s(n, t);
      });
    }
  })(), Fancybox.bind('[data-fancybox="works-slide"]', {}), document.querySelector(".structure__runline") && $(".structure__runline").marquee({
    duration: 1e4,
    startVisible: !0,
    duplicated: !0
  }), document.querySelector(".big-banner__runline") && $(".big-banner__runline").marquee({
    duration: 1e4,
    startVisible: !0,
    duplicated: !0
  });

  (function () {
    var e = document.querySelector(".popup__field");
    window.intlTelInput(e, {
      initialCountry: "ru"
    });
  })();
});